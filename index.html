<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rosary Prayer</title>
  <style>
    body {
      background-color: #111;
      color: #f0f0f0;
      font-family: sans-serif;
      padding: 1em;
    }
    label.prayer, label.mystery {
      display: block;
      margin: 1em 0 0.5em;
      font-size: 1rem;
      line-height: 1.5;
    }
    label.mystery {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .description {
      font-style: italic;
      margin-bottom: 1em;
    }
    select {
      margin-bottom: 1em;
      font-size: 1rem;
    }
    hr {
      border: 0;
      border-top: 1px solid #555;
      margin: 2em 0;
    }
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background-color: #222;
      color: #f0f0f0;
      padding: 1.5em;
      border-radius: 8px;
      max-width: 500px;
      text-align: left;
      position: relative;
    }
    .modal-close {
      position: absolute;
      top: 0.5em;
      right: 0.5em;
      cursor: pointer;
      font-size: 1.2em;
      background: transparent;
      border: none;
      color: #f0f0f0;
    }
  </style>
</head>
<body>
  <!-- Meditation guidance popup -->
  <div id="meditationModal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" id="closeModal">&times;</button>
      <h3>How to meditate on the Mysteries</h3>
      <p>As you pray each Hail Mary, focus on the Mystery, visualizing the scene and reflecting on its meaning. Let each bead draw you deeper:</p>
      <ul>
        <li><strong>Visualize:</strong> Imagine yourself present at the event, noticing details.</li>
        <li><strong>Reflect:</strong> Consider the emotions of Mary and Jesus, and what God reveals.</li>
        <li><strong>Apply:</strong> Ask how this Mystery speaks to your life today and what virtue it inspires.</li>
      </ul>
    </div>
  </div>

  <h2 id="header"></h2>
  <label for="mysterySelect">Select Mysteries:</label>
  <select id="mysterySelect">
    <option value="auto">Auto (based on day)</option>
    <option value="joyful">Joyful (Mon/Sat)</option>
    <option value="sorrowful">Sorrowful (Tue/Fri)</option>
    <option value="glorious">Glorious (Wed/Sun)</option>
    <option value="luminous">Luminous (Thu)</option>
  </select>
  <div id="app"></div>

  <script>
    const prayers = [
      { id: "creed", text: "I believe in God, the Father almighty...Amen." },
      { id: "our_father", text: "Our Father, who art in heaven...Amen." },
      { id: "hail_mary", text: "Hail Mary, full of grace...Amen." },
      { id: "glory_be", text: "Glory be to the Father...world without end. Amen." },
      { id: "fatima_prayer", text: "O my Jesus, forgive us our sins...Amen." },
      { id: "hail_holy_queen", text: "Hail, holy Queen, Mother of mercy...Amen." },
      { id: "final_prayer", text: "Let us pray...through the same Christ our Lord. Amen." },
      { id: "intro1", text: "3 Hail Marys: For Faith, Hope, and Charity." },
      { id: "intro2", text: "Glory Be (before 1st mystery)." }
    ];

    const mysteriesData = { /* same detailed mysteriesData object as before */ };

    function getTodayMysteryKey() {
      const day = new Date().toLocaleDateString('en-US', { weekday: 'long' });
      return (
        day === 'Thursday' ? 'luminous' :
        day === 'Tuesday' || day === 'Friday' ? 'sorrowful' :
        day === 'Wednesday' || day === 'Sunday' ? 'glorious' :
        'joyful'
      );
    }

    function renderRosary(selectedKey) {
      const dayName = new Date().toLocaleDateString('en-US',{weekday:'long'});
      const mysteryKey = selectedKey === 'auto' ? getTodayMysteryKey() : selectedKey;
      document.getElementById('header').textContent =
        `Today is ${dayName} â€” ${mysteryKey.charAt(0).toUpperCase()+mysteryKey.slice(1)} Mysteries`;

      const app = document.getElementById('app');
      app.innerHTML = '';

      /* Render prayers and mysteries as before */
    }

    window.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('meditationModal');
      const closeBtn = document.getElementById('closeModal');
      // Close on X click
      closeBtn.addEventListener('click', () => modal.style.display = 'none');
      // Close on background click
      modal.addEventListener('click', e => {
        if (e.target === modal) modal.style.display = 'none';
      });
      document.getElementById('mysterySelect').addEventListener('change', e => renderRosary(e.target.value));
      renderRosary('auto');
    });
  </script>
</body>
</html>
